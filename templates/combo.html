<!DOCTYPE html>
<html>
<head>
    <title>Event Combo Generator</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif;
        }
        table, th, td {
            border: 1px solid #888;
            border-collapse: collapse;
            padding: 4px;
        }
        th {
            background: #eee;
        }
        .highlight {
            background-color: rgb(197, 227, 188);
        }
    </style>
</head>
<body>
<h2>Event Combo Generator</h2>
<form action="/combo-generator" method="post" enctype="multipart/form-data">
    <label for="pdf">PDF File:</label>
    <input type="file" name="pdf" accept=".pdf" required>
    <label for="lanes">Lanes:</label>
    <select name="lanes" required>
        {% for l in range(4, 9) %}
        <option value="{{ l }}" {% if lanes == l %}selected{% endif %}>{{ l }}</option>
        {% endfor %}
    </select>
    <button type="submit">Process</button>
</form>

{% if table %}
<hr>
<h3>{{ meet_title }}</h3>
<p><strong>Total combo events: {{ combo_count }}</strong></p>
<p>
    Combos only: <a href="{{ url_for('download', filename=csv_filename) }}">Download CSV</a> |
    <a href="{{ url_for('download', filename=pdf_filename) }}">Download PDF</a>
</p>

<table>
    <thead>
    <tr>
        {% for key in table[0].keys() %}
        <th>{{ key }}</th>
        {% endfor %}
    </tr>
    </thead>
    <tbody>
    {% for row in table %}
    <tr class="{% if row['Can Combine?'] == 'Yes' %}highlight{% endif %}">
        {% for val in row.values() %}
        <td>{{ val }}</td>
        {% endfor %}
    </tr>
    {% endfor %}
    </tbody>
</table>
{% endif %}
</body>
</html>